<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>LuaSpark — AI Roblox LuaU Buddy</title>
<meta name="theme-color" content="#0A0F1C">
<link rel="icon" href="assets/luaspark-logo.png">

<style>
/* ============= GLOBAL THEME (Liquid Glass) ============= */
:root {
  --bg: #050915;
  --glass: rgba(255,255,255,.08);
  --line: rgba(255,255,255,.1);
  --text: #e8f1ff;
  --muted: #9fb7dd;
  --primary: #00fff0;
  --accent: #b388ff;
  --radius: 16px;
  --shadow: 0 20px 60px rgba(0,0,0,.45);
}

* { box-sizing:border-box; margin:0; padding:0; }
body {
  font-family: Inter, system-ui, sans-serif;
  background: var(--bg);
  color: var(--text);
  overflow-x:hidden;
}

/* ====== PARTICLE CANVAS ====== */
#particles {
  position:fixed;
  top:0; left:0; width:100%; height:100%;
  z-index:-2;
  background: radial-gradient(circle at 50% 20%, rgba(0,255,240,.15), transparent 60%),
              radial-gradient(circle at 80% 80%, rgba(179,136,255,.12), transparent 60%);
}

/* ===== HEADER ===== */
header {
  position:fixed; top:0; width:100%; z-index:100;
  backdrop-filter: blur(12px);
  background: rgba(10,14,30,.6);
  border-bottom:1px solid var(--line);
  height:74px;
}
.nav { display:flex; justify-content:space-between; align-items:center; height:74px; padding:0 22px; max-width:1180px; margin:0 auto; }
.brand { display:flex; align-items:center; gap:10px; text-decoration:none; }
.brand img { width:42px; height:42px; border-radius:12px; box-shadow:0 0 16px rgba(0,255,240,.4); }
.brand span { background:linear-gradient(180deg,#fff,#b9dfff); -webkit-background-clip:text; color:transparent; font-weight:900; font-size:1.2rem; }

.navlinks a {
  color:var(--muted); text-decoration:none; padding:10px 14px; border-radius:10px;
  transition:all .2s;
}
.navlinks a:hover, .navlinks a.active { color:#fff; background:var(--glass); }

.actions .btn {
  border:1px solid var(--line);
  background:var(--glass);
  padding:9px 16px;
  border-radius:12px;
  color:#fff;
  font-weight:700;
  cursor:pointer;
}
.btn-primary {
  background:linear-gradient(90deg,var(--primary),#7bd7ff);
  border:none;
  color:#001016;
}

/* ===== HERO ===== */
.hero { text-align:center; padding-top:130px; padding-bottom:90px; position:relative; }
.hero h1 {
  font-size:clamp(38px,5vw,68px);
  line-height:1.1;
  background:linear-gradient(180deg,#fff,#b6dfff);
  -webkit-background-clip:text; color:transparent;
}
.hero p { color:var(--muted); margin-top:12px; font-size:18px; }
.hero .cta { margin-top:24px; display:flex; justify-content:center; gap:12px; flex-wrap:wrap; }

/* ===== FEATURES ===== */
section { padding:90px 0; }
.section-title { text-align:center; font-size:32px; margin-bottom:8px; }
.section-sub { text-align:center; color:var(--muted); margin-bottom:36px; }

.feature-grid {
  display:grid;
  grid-template-columns:repeat(auto-fit,minmax(250px,1fr));
  gap:18px;
  max-width:1100px;
  margin:0 auto;
}
.card {
  background:rgba(255,255,255,.05);
  border:1px solid var(--line);
  border-radius:var(--radius);
  padding:22px;
  backdrop-filter:blur(12px);
  box-shadow:var(--shadow);
}
.card h3 { margin-bottom:8px; color:#e9f3ff; }

/* ===== PRICING ===== */
.pricing .plan {
  max-width:440px;
  margin:0 auto;
  border-radius:20px;
  border:1px solid var(--line);
  background:rgba(255,255,255,.05);
  box-shadow:var(--shadow);
  text-align:center;
  padding:28px;
}
.price { font-size:48px; font-weight:900; background:linear-gradient(180deg,#fff,#bfe3ff); -webkit-background-clip:text; color:transparent; }
.pricing button { margin-top:14px; }

/* ===== REVIEWS ===== */
.review-grid {
  display:grid;
  grid-template-columns:repeat(auto-fit,minmax(260px,1fr));
  gap:18px;
  max-width:1100px;
  margin:0 auto;
}
.review {
  border-radius:18px;
  border:1px solid var(--line);
  background:rgba(255,255,255,.04);
  backdrop-filter:blur(10px);
  padding:20px;
  box-shadow:var(--shadow);
}
.stars { color:#ffd166; margin-top:6px; }

/* ===== GENERATOR ===== */
.generator {
  position:relative;
  border:1px solid var(--line);
  border-radius:20px;
  background:rgba(255,255,255,.04);
  backdrop-filter:blur(10px);
  padding:22px;
  max-width:900px;
  margin:0 auto;
  box-shadow:var(--shadow);
}
.generator .overlay {
  position:absolute;
  inset:0;
  background:rgba(6,10,20,.8);
  display:flex; flex-direction:column; align-items:center; justify-content:center;
  border-radius:20px;
  backdrop-filter:blur(10px);
  z-index:5;
}
.overlay h3 { margin-bottom:8px; }
.promptrow { display:flex; gap:10px; flex-wrap:wrap; margin:12px 0; }
.input {
  flex:1; min-width:260px;
  background:rgba(255,255,255,.05);
  border:1px solid var(--line);
  color:#fff; border-radius:12px;
  padding:12px;
}
.panel {
  border:1px solid var(--line);
  border-radius:14px;
  padding:14px;
  background:rgba(255,255,255,.03);
}
.copy-btn {
  border:none;
  background:rgba(255,255,255,.1);
  padding:6px 10px;
  border-radius:8px;
  cursor:pointer;
  color:#fff;
}

/* ===== CHANGELOG & CONTACT ===== */
.changelog, .contact {
  text-align:center;
  max-width:800px;
  margin:0 auto;
}
.contact p { color:var(--muted); }

/* ===== MODAL ===== */
.modal {
  position:fixed; inset:0;
  background:rgba(4,8,16,.6);
  display:none;
  align-items:center; justify-content:center;
  z-index:200;
}
.modal.show { display:flex; }
.auth {
  background:rgba(255,255,255,.08);
  border:1px solid var(--line);
  border-radius:20px;
  padding:28px;
  width:min(420px,90%);
  backdrop-filter:blur(14px);
  box-shadow:var(--shadow);
}
.auth h2 { margin-bottom:6px; }
.auth input {
  width:100%;
  background:rgba(255,255,255,.05);
  border:1px solid var(--line);
  border-radius:10px;
  color:#fff;
  padding:12px;
  margin-bottom:10px;
}
.auth .btn { width:100%; margin-top:8px; }
.auth .close {
  position:absolute; top:10px; right:14px;
  border:none; background:transparent; color:#fff; font-size:22px; cursor:pointer;
}

/* ===== FOOTER ===== */
footer {
  border-top:1px solid var(--line);
  text-align:center;
  padding:24px 0;
  color:var(--muted);
}

/* ===== RESPONSIVE ===== */
@media (max-width:700px){
  .navlinks{display:none;}
  .price{font-size:40px;}
}
</style>
</head>
<body>
<canvas id="particles"></canvas>

<header>
  <div class="nav">
    <a class="brand" href="#">
      <img src="assets/luaspark-logo.png" alt="LuaSpark Logo">
      <span>LuaSpark</span>
    </a>
    <div class="navlinks">
      <a href="#features">Features</a>
      <a href="#pricing">Pricing</a>
      <a href="#reviews">Reviews</a>
      <a href="#generator">Generator</a>
      <a href="#changelog">Changelog</a>
    </div>
    <div class="actions">
      <button class="btn" id="btnLogin">Sign In</button>
      <button class="btn btn-primary" id="btnBuy">Buy Now</button>
      <button class="btn" id="btnLogout" style="display:none;">Sign Out</button>
    </div>
  </div>
</header>

<section class="hero" id="home">
  <h1>Ship LuaU 10× Faster with <span style="color:#00fff0;">LuaSpark</span></h1>
  <p>Generate clean Roblox LuaU scripts and explanations instantly.</p>
  <div class="cta">
    <button class="btn btn-primary" id="ctaGetStarted">Get Started</button>
    <button class="btn" id="ctaSeeDemo">See Demo</button>
  </div>
</section>

<section id="features">
  <h2 class="section-title">Why LuaSpark</h2>
  <p class="section-sub">Faster scripts. Cleaner code. Real explanations.</p>
  <div class="feature-grid">
    <div class="card"><h3>⚡ Smart Generation</h3><p>High-quality LuaU with correct events and patterns.</p></div>
    <div class="card"><h3>🧠 Explanations</h3><p>Get the "why" behind each line — learn as you build.</p></div>
    <div class="card"><h3>💾 Reliable Output</h3><p>No junk, no bloat, just clean code ready to paste.</p></div>
  </div>
</section>

<section id="pricing" class="pricing">
  <h2 class="section-title">Simple Pricing</h2>
  <p class="section-sub">One-time payment, lifetime access.</p>
  <div class="plan">
    <p class="price">$6.99</p>
    <p style="color:var(--muted)">Unlock generator and future updates forever.</p>
    <button class="btn btn-primary" id="buyNow">Buy Now</button>
  </div>
</section>

<section id="reviews">
  <h2 class="section-title">What Devs Say</h2>
  <div class="review-grid">
    <div class="review"><p>"LuaSpark saved me hours. It's like having a mentor in the editor."</p><div class="stars">★★★★★</div><div style="color:#a9bfec;font-weight:800;margin-top:6px;">Alex • Roblox Dev</div></div>
    <div class="review"><p>"The code actually works, and the explanations help me learn."</p><div class="stars">★★★★★</div><div style="color:#a9bfec;font-weight:800;margin-top:6px;">Sarah • Builder</div></div>
    <div class="review"><p>"Best $6.99 I've spent — feels premium but accessible."</p><div class="stars">★★★★★</div><div style="color:#a9bfec;font-weight:800;margin-top:6px;">Hamza • Scripter</div></div>
  </div>
</section>

<section id="generator">
  <h2 class="section-title">LuaSpark Generator</h2>
  <p class="section-sub">Enter any prompt — get working LuaU code instantly.</p>
  <div class="generator">
    <div class="overlay" id="lockOverlay">
      <h3>🔒 Unlock LuaSpark</h3>
      <p style="color:var(--muted);margin-bottom:10px;">Sign in & purchase lifetime access to use the generator.</p>
      <button class="btn btn-primary" id="buyNowOverlay">Buy Now</button>
    </div>

    <div class="promptrow">
      <input id="prompt" class="input" placeholder="e.g. LuaU: on touch give 10 coins with debounce">
      <button class="btn btn-primary" id="btnGenerate">Generate</button>
    </div>

    <div class="panel">
      <div style="display:flex;justify-content:space-between;align-items:center;">
        <h3 style="margin:0;">Response</h3>
        <button class="copy-btn" id="copyBtn">Copy</button>
      </div>
      <div id="responseBox" style="white-space:pre-wrap;word-wrap:break-word;margin-top:10px;color:#dce7ff;">🤖 Enter a prompt to begin.</div>
    </div>
  </div>
</section>

<section id="changelog">
  <h2 class="section-title">Changelog</h2>
  <div class="changelog">
    <p><strong>Version 1.0 — Release!</strong></p>
  </div>
</section>

<section class="contact" id="contact">
  <h2 class="section-title">Need Help?</h2>
  <p>DM us on TikTok <strong>@LuasparkOfficial</strong> for bugs or feedback.</p>
</section>

<footer>© 2025 LuaSpark. All rights reserved.</footer>

<!-- ===== AUTH MODAL ===== -->
<div class="modal" id="authModal">
  <div class="auth">
    <button class="close" id="closeAuth">×</button>
    <h2>Sign In / Register</h2>
    <input type="email" id="email" placeholder="you@example.com">
    <input type="password" id="password" placeholder="••••••••">
    <button class="btn btn-primary" id="btnSignin">Sign In</button>
    <button class="btn" id="btnSignup">Sign Up</button>
  </div>
</div>
<script>
/* ===================================================
   CONFIG
=================================================== */
const API_BASE     = "http://localhost:5000";
const PAYPAL_LINK  = "https://www.paypal.com/ncp/payment/QMBJE8CWUGEA4";
const BYPASS_EMAIL = "Hamadalkazemi2013@gmail.com";

/* Helpers */
const $  = s => document.querySelector(s);
const $$ = s => Array.from(document.querySelectorAll(s));
function toast(msg){ console.log("[LuaSpark]", msg); }

/* ===================================================
   AUTH
=================================================== */
$("#btnLogin").onclick = () => $("#authModal").classList.add("show");
$("#closeAuth").onclick = () => $("#authModal").classList.remove("show");

async function api(path, body) {
  const res = await fetch(API_BASE + path, {
    method: "POST",
    headers: { "Content-Type": "application/json" },
    body: JSON.stringify(body || {})
  });
  return res.json();
}

$("#btnSignup").onclick = async () => {
  const email = $("#email").value.trim();
  const password = $("#password").value.trim();
  if (!email || !password) return toast("Email + password required");
  const data = await api("/signup", { email, password });
  if (data.success) toast("Signed up! Now sign in."); else toast(data.error || "Signup failed.");
};

$("#btnSignin").onclick = async () => {
  const email = $("#email").value.trim();
  const password = $("#password").value.trim();
  if (!email || !password) return toast("Email + password required");
  const data = await api("/login", { email, password });
  if (data.error) return toast(data.error);
  localStorage.setItem("token", data.token || "");
  localStorage.setItem("email", email);
  const bypass = email.toLowerCase() === BYPASS_EMAIL.toLowerCase();
  localStorage.setItem("hasPaid", (data.hasPaid || bypass) ? "true" : "false");
  $("#authModal").classList.remove("show");
  $("#btnLogin").style.display = "none";
  $("#btnLogout").style.display = "inline-flex";
  unlockIfEligible();
  toast("Signed in!");
};

$("#btnLogout").onclick = () => {
  localStorage.clear();
  $("#btnLogout").style.display = "none";
  $("#btnLogin").style.display = "inline-flex";
  unlockIfEligible();
  toast("Signed out.");
};

/* ===================================================
   PAYMENT / ACCESS
=================================================== */
function unlockIfEligible() {
  const token  = localStorage.getItem("token");
  const email  = localStorage.getItem("email");
  const paid   = localStorage.getItem("hasPaid") === "true";
  const bypass = email && email.toLowerCase() === BYPASS_EMAIL.toLowerCase();
  const eligible = !!token && (paid || bypass);

  const overlay = $("#lockOverlay");
  if (eligible) {
    overlay.style.display = "none";
    $("#btnGenerate").disabled = false;
  } else {
    overlay.style.display = "flex";
    $("#btnGenerate").disabled = true;
  }
  return eligible;
}

$("#btnBuy").onclick =
$("#buyNow").onclick =
$("#buyNowOverlay").onclick = () => {
  const token = localStorage.getItem("token");
  if (!token) { toast("Sign in first to purchase."); $("#authModal").classList.add("show"); return; }
  window.open(PAYPAL_LINK, "_blank");
};

unlockIfEligible();

/* ===================================================
   GENERATOR
=================================================== */
$("#btnGenerate").onclick = async () => {
  if (!unlockIfEligible()) return toast("Unlock LuaSpark first.");
  const prompt = $("#prompt").value.trim();
  if (!prompt) return toast("Enter a prompt.");

  $("#responseBox").textContent = "⚙️ Generating...";
  try {
    const token = localStorage.getItem("token") || "";
    const res = await fetch(API_BASE + "/generate", {
      method: "POST",
      headers: {
        "Content-Type": "application/json",
        "Authorization": "Bearer " + token
      },
      body: JSON.stringify({ prompt })
    });
    const data = await res.json();
    if (data.error) { $("#responseBox").textContent = "❌ " + data.error; return; }
    $("#responseBox").textContent = data.output || "(No output)";
  } catch (err) {
    $("#responseBox").textContent = "Server error.";
  }
};

$("#copyBtn").onclick = () => {
  const txt = $("#responseBox").textContent;
  navigator.clipboard.writeText(txt).then(() => toast("Copied to clipboard!"));
};

/* ===================================================
   NAVIGATION / CTA
=================================================== */
$("#ctaGetStarted").onclick = () => $("#authModal").classList.add("show");
$("#ctaSeeDemo").onclick = () => document.querySelector("#generator").scrollIntoView({ behavior:"smooth" });

/* ===================================================
   PARTICLE EFFECTS
=================================================== */
const canvas = document.getElementById("particles");
const ctx = canvas.getContext("2d");
let W, H, particles = [];

function resize() {
  W = canvas.width = window.innerWidth;
  H = canvas.height = window.innerHeight;
  particles = Array.from({length:120}).map(() => ({
    x: Math.random()*W,
    y: Math.random()*H,
    r: Math.random()*2+1,
    dx:(Math.random()-.5)*0.6,
    dy:(Math.random()-.5)*0.6,
    c:`hsla(${180+Math.random()*100},80%,70%,${Math.random()*0.5})`
  }));
}
resize();
window.addEventListener("resize", resize);

function animate() {
  ctx.clearRect(0,0,W,H);
  for (const p of particles){
    p.x+=p.dx; p.y+=p.dy;
    if(p.x<0||p.x>W) p.dx*=-1;
    if(p.y<0||p.y>H) p.dy*=-1;
    ctx.beginPath();
    ctx.fillStyle=p.c;
    ctx.arc(p.x,p.y,p.r,0,Math.PI*2);
    ctx.fill();
  }
  requestAnimationFrame(animate);
}
animate();

/* ===================================================
   INIT
=================================================== */
if (localStorage.getItem("token")) {
  $("#btnLogin").style.display = "none";
  $("#btnLogout").style.display = "inline-flex";
}
</script>
</body>
</html>
